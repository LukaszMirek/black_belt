SwimmingStatistics=function(){this.swimmingStatsTableSummaryDiv=$("body").find(".swimming-stats-table-summary"),this.sportPie=null,this.selectedTrIndex=null,this.colors=["#d3396b","#dc6189","#e588a6","#edb0c4","#edc7d4","#eddfe4"],this.mainContainer=$("#swimming-stats-panel")},SwimmingStatistics.prototype.setModel=function(i){this.model=i,this.checkSwimmingData()},SwimmingStatistics.prototype.init=function(i){this.selectedExercise=null,this.checkSwimmingData(),i(),$.dispatcher.on("store.dataLoaded",function(i,s){s.isSingleSport&&this.show(store.getSelectedExercise().id)}.bind(this)),$.dispatcher.on("sportList.selectSport",function(i,s){this.show(s.exerciseId)}.bind(this)),$.dispatcher.on("sportList.unselectSport",function(i,s){this.hide()}.bind(this))},SwimmingStatistics.prototype.windowResize=function(i){this.windowWidth=$(window).width(),this.windowHeight=$(window).height(),AppGlobal.screenWidth=document.documentElement.clientWidth},SwimmingStatistics.prototype.checkSwimmingData=function(){null==this.model||$.isEmptyObject(this.model)?this.mainContainer.hide():(this.windowWidth=$(window).width(),this.windowHeight=$(window).height())},SwimmingStatistics.prototype.hide=function(){this.view().hide(),this.mainContainer.hide()},SwimmingStatistics.prototype.show=function(i){this.exerciseId=i,null!=this.model[i]&&null!=this.model[i].sportDistribution?(this.view().show(),this.mainContainer.removeClass("hidden"),this.orderSportDistribution(),this.drawPieChart(),this.renderSwimmingStatsTable()):this.hide()},SwimmingStatistics.prototype.view=function(){return $(".swimming-stats-wrapper")},SwimmingStatistics.prototype.drawPieChart=function(){if(null!=this.model&&null!=this.exerciseId){var i=this.model[this.exerciseId];if(null!=i){var s=i.sportDistribution,t=this;this.sportPie=$("#swimmingPieChart").commonPieChart({data:s,labels:"pieChartSportsList",piechartType:"SPORT",colors:["#d3396b","#dc6189","#e588a6","#edb0c4","#edc7d4","#eddfe4"],loadEventHandler:t,loadEventHandlerMethod:"handlePieChartLoadEvent",animationEnabled:!1})}}},SwimmingStatistics.prototype.renderSwimmingStatsTable=function(){if(null!=this.model&&null!=this.exerciseId){var i=this.model[this.exerciseId],s="";if(null!=i){var t=!1,e=!1,n=0;for(var a in i.sportDistribution){var o=i.swimmingStats[i.sportDistribution[a].sportName];null!=o.heartrateAvg&&null!=o.heartrateMax&&(t=!0),o.strokeCount>0&&(e=!0),null!=o.distance&&0!=o.distance&&null!=o.swimmingTimeTotal&&0!=o.swimmingTimeTotal.millis||n++}if(n==i.sportDistribution.length)return void this.mainContainer.addClass("hidden");"METERS"==i.swimmingPollUnits?s="["+Messages["diary.result.swimming_indoor.min_per_100_m"]+"]":"YARDS"==i.swimmingPollUnits&&(s="["+Messages["diary.result.swimming_indoor.min_per_100_yd"]+"]");var r="";e&&(r+="<button type='button' class='btn btn-icon js-open-swimming-swolf-info' style='position:absolute; right:0; top:0;'><i class='icon icon-help'></i></button>"),r+="<ul class='unstyled block-data-table'>",r+="<li class='headers hidden-tablet hidden-phone'>",r+="<p></p><p>"+Messages["analyseview.duration"]+"</p>",t===!0&&(r+="<p>"+Messages["analyseview.chart.hr.avg"]+" / "+Messages["analyseview.lap.max_hr_header"]+"</p>"),r+="<p>"+Messages["curves.type.pace"]+"</p>",e&&(r+="<p>"+Messages["diary.result.swimming_indoor.strokes_avg"]+"</p>",r+="<p>"+Messages["diary.result.swimming_indoor.strokes_minute"]+"</p>",r+="<p>"+Messages["diary.result.swimming_indoor.swolf"]+"</p>"),r+="</li>";for(var a in i.sportDistribution){var o=i.swimmingStats[i.sportDistribution[a].sportName],l=!1;if(null!=o.distance&&0!=o.distance&&null!=o.swimmingTimeTotal&&0!=o.swimmingTimeTotal.millis||(l=!0),0==l){var d=CommonHelpers.round(o.strokeCount/o.swimmingTimeTotal.millis*6e4,0),m=CommonHelpers.round(o.strokeCount/Math.round(o.distance/i.poolLength),0),c="",p="";c=null!=o.heartrateAvg?o.heartrateAvg:0,p=null!=o.heartrateMax?o.heartrateMax:0;var h=i.sportDistribution[a].sportName;r+="<li class='swimming-stats-style' tr-index='"+a+"' data-swimming-style-id='"+h.toLowerCase()+"'><div class='content clearfix'>",r+="<span class='indicator-dott' style='background-color:"+this.colors[a]+";'></span>",r+="<p data-type-id='style'>",r+="<span class='header-data'>"+Math.round(o.distance)+" <span class='unit'>","METERS"==i.swimmingPollUnits?r+=Messages["common.abbreviations.unitOfMeters"]:"YARDS"==i.swimmingPollUnits&&(r+=Messages["diary.result.swimming_indoor.unitOfYards"]),r+="</span></span>",r+="<span class='header-suffix force-text-break'>"+h+"</span>",r+="</p>",r+="<p data-type-id='duration'><span class='data'>"+DateUtils.millisToThreeDigitTime(o.swimmingTimeTotal.millis)+"</span><span class='suffix'>["+Messages["common.abbreviations.unitOfHoursMinutesSeconds"]+"]</span></p>",t===!0&&(r+="<p data-type-id='hr'><span class='data'>"+c+" / "+p+"</span><span class='suffix'>["+Messages["common.abbreviations.unitOfHeartbeat"]+"]</span></p>"),r+="<p data-type-id='pace'><span class='data'>"+DateUtils.getMinutesAsText(CommonHelpers.calculateSwimmingPace(o.swimmingTimeTotal.millis,o.distance))+"<span class='suffix'>"+s+"</span></p>",e&&(r+="<p data-type-id='strokesPpl'><span class='data'>"+m+"</span><span class='suffix'><span class='hidden-desktop'>"+Messages["diary.result.swimming_indoor.strokes_avg"]+"</span></span></p>",r+="<p data-type-id='strokesPmin'><span class='data'>"+d+"</span><span class='suffix'><span class='hidden-desktop'>"+Messages["diary.result.swimming_indoor.strokes_minute"]+"</span></span></p>",r+="<p data-type-id='swolf'><span class='data'>"+CommonHelpers.round(o.swolfAvg,0)+"</span><span class='suffix'><span class='hidden-desktop'>"+Messages["diary.result.swimming_indoor.swolf"]+"</span></span></p>"),r+="</div></li>"}}r+="</ul>",this.swimmingStatsTableSummaryDiv.html(r),this.eventHandlers()}}},SwimmingStatistics.prototype.orderSportDistribution=function(){null!=this.model&&null!=this.exerciseId&&null!=this.model[this.exerciseId]&&null!=this.model[this.exerciseId].sportDistribution&&this.model[this.exerciseId].sportDistribution.sort(function(i,s){return s.distributionPercent-i.distributionPercent})},SwimmingStatistics.prototype.eventHandlers=function(){var i=this;$(".swimming-stats-style").bind("click",function(s){var t=$(this).attr("tr-index");i.sportPie.selectPieChartSlice(t),t==i.selectedTrIndex?(i.selectedTrIndex=null,$(this).removeClass("highlight"),$(".swimming-stats-style").removeClass("fade-out")):($(".swimming-stats-style").removeClass("highlight"),$(".swimming-stats-style").addClass("fade-out"),i.selectedTrIndex=t,$(this).addClass("highlight"),$(this).removeClass("fade-out"))}),$(".js-open-swimming-swolf-info").on("click",function(){Modal.open($(".js-swimming-swolf-info"),{style:"narrow",callback:function(i){}})}),$(".swimming-stats-style").hover(function(){if(null==i.selectedTrIndex){var s=$(this).attr("tr-index");i.sportPie.selectPieChartSlice(s)}},function(){if(null==i.selectedTrIndex){var s=$(this).attr("tr-index");i.sportPie.chart.series[0].data[s].selected="false",i.sportPie.selectPieChartSlice(s)}}),$(".swimming-stats-piechart").hover(function(){},function(){for(var s in i.sportPie.chart.series[0].data)if(1==i.sportPie.chart.series[0].data[s].selected){i.sportPie.chart.series[0].data[s].selected="false",i.sportPie.selectPieChartSlice(s),null!=i.selectedTrIndex&&i.sportPie.selectPieChartSlice(i.selectedTrIndex);break}})},SwimmingStatistics.prototype.handlePieChartLoadEvent=function(){var i=this,s=$(".swimming-stats-collapse").attr("ref"),t=$("#"+s);t.is(":hidden")?(i.windowResize(t),t.addClass("visible"),t.removeClass("hidden")):(i.windowResize(t),t.addClass("hidden"),t.removeClass("visible"))};
//# sourceMappingURL=swimmingStatistics.min.js.map