function bindNotificationEvents(e,t,n){n||e.html(t),e.find(".goto-btn").unbind(),e.find(".goto-btn").bind("click",function(e){var t=$(this).parent().parent(),n=t.data("notification-type");if("GROUP_JOIN_REQUEST"===n||"GROUP_INVITE_REQUEST"===n||"GROUP_INVITE_ACCEPT"===n||"GROUP_JOINED"===n||"GROUP_JOIN_ACCEPT"===n||"REPORT_COMMUNITY_GROUP_HARRASMENT"===n||"REPORT_COMMUNITY_GROUP_SPAM_CAM"===n||"REPORT_COMMUNITY_GROUP_HARMFUL"===n){e.preventDefault();var o=$(this).data("group-id"),r=$(this).data("origin");sessionStorage.removeItem("singleFeedNotificationData");var i=r;"GROUPS"===i?window.location.href="/community/group/"+o+"/feed":"CLUBS"===i?window.location.href="/community/club/"+o+"/feed":"EVENTS"===i&&(window.location.href="/community/events/"+o+"/event")}else if("REPORTED_POST_DELETED"===n||"FEED_ITEM_POSTED"===n||"FEED_COMMENT_RECEIVED"===n||"LIKED"===n||"REPORT_POST_ANNOYING"===n||"REPORT_POST_NOT_FLOW"===n||"REPORT_POST_SPAM"===n||"REPORT_COMMENT_ANNOYING"===n||"REPORT_COMMENT_NOT_FLOW"===n||"REPORT_COMMENT_SPAM"===n){e.preventDefault();var o=$(this).data("group-id"),r=$(this).data("origin"),s=$(this).data("notificationJson"),a=s.notification.feedItemId?s.notification.feedItemId:$(this).data("feeditemid");"LIKED"===n&&(a=s.notification.entityId);var l={created:s.notification.created,attributes:{commentId:s.notification.attributes.commentId,removalReasonType:s.notification.attributes.removalReasonType},sender:{userId:s.notification.sender.id,pictureUrl:s.notificationSender.url,firstName:s.notificationSender.firstName,lastName:s.notificationSender.lastName},localizedMessage:""};sessionStorage.setItem("singleFeedNotificationData",JSON.stringify(l));var i=r;"GROUPS"===i?window.location.href="REPORTED_POST_DELETED"!==n?"/community/group/"+o+"/feed/"+a:"/community/group/"+o+"/feed/":"CLUBS"===i?window.location.href="/community/club/"+o+"/feed/":"EVENTS"===i&&(window.location.href="/community/events/"+o+"/event/"+a)}}),e.off("click"),e.on("click",function(e){e.stopPropagation()}),e.find(".btn-accept-decline-request").unbind(),e.find(".btn-accept-decline-request").bind("click",function(t){t.preventDefault();var n=$(this).parent().parent(),o=n.data("ui-notifications-request-id"),r=n.data("notification-type"),i=$(this).data("ui-notifications-request-type");if("FOLLOW_REQUEST"==r){var s=$(this).data("follow-request-id");$.ajax({type:"POST",url:"/social/notifications/"+i+"Follow",data:JSON.stringify({id:s}),dataType:"json",contentType:"application/json; charset=utf-8"}).done(function(t){if("error"===t)location.reload();else{e.find(".request[data-ui-notifications-request-id='"+o+"']").remove();setTimeout(function(){e.html().length<30&&e.html("").append('<div class="item"><p>There are no notifications at this time.</p></div>')},200)}})}else if("GROUP_INVITE_REQUEST"==r){var a=$(this).data("user-id"),l=$(this).data("group-id"),m=$(this).closest(".request"),c=$(this).data("origin");$.ajax({type:"DELETE",url:"/common/notification/api/notification/"+o+"/remove",contentType:"text/html; charset=utf-8"}).done(function(e){"accept"==i?$.ajax({type:"POST",url:"/community/api/group/"+l+"/membership/invitation/accept",data:JSON.stringify({userId:a}),dataType:"json",contentType:"application/json; charset=utf-8"}).done(function(e){var t="GROUPS"===c?"group":"club";window.location.href="/community/"+t+"/"+l+"/feed"}):$.ajax({type:"POST",url:"/community/api/group/"+l+"/membership/invitation/decline",data:JSON.stringify({userId:a}),dataType:"json",contentType:"application/json; charset=utf-8"}).done(function(e){m.remove()})})}else if("GROUP_JOIN_REQUEST"==r){var a=$(this).data("user-id"),l=$(this).data("group-id"),m=$(this).closest(".request");$.ajax({type:"DELETE",url:"/common/notification/api/notification/"+o+"/remove",contentType:"text/html; charset=utf-8"}).done(function(e){"accept"==i?$.ajax({type:"POST",url:"/community/api/group/"+l+"/membership/request/accept",data:JSON.stringify({userId:a}),dataType:"json",contentType:"application/json; charset=utf-8"}).done(function(e){m.remove()}):$.ajax({type:"POST",url:"/community/api/group/"+l+"/membership/request/reject",data:JSON.stringify({userId:a}),dataType:"json",contentType:"application/json; charset=utf-8"}).done(function(e){m.remove()})})}else{e.find(".remove-community-notification").unbind(),e.find(".remove-community-notification").bind("click",function(t){t.preventDefault();var n=$(this).parent().data("ui-notifications-community-id");$.ajax({type:"DELETE",url:"/community/api/group/notification/"+n+"/remove",dataType:"json",cache:!1,contentType:"multipart/form-data; charset=utf-8"}).done(function(t){if("error"===t)location.reload();else{e.find(".request[data-ui-notifications-community-id='"+n+"']").remove();setTimeout(function(){e.html().length<30&&e.html("").append('<div class="item"><p>'+Messages["notifications.zero_notifications"]+"</p></div>")},200)}})});var u={type:"POST",data:JSON.stringify({id:o}),dataType:"json",contentType:"application/json; charset=utf-8"},p=function(t){e.find(".request[data-ui-notifications-request-id='"+o+"']").remove();setTimeout(function(){e.html().length<30&&e.html("").append('<div class="item"><p>There are no notifications at this time.</p></div>')},200)};if("TEAM_INVITE_REQUEST"==r?(u.url="/social/notifications/teamInvite/"+i,"accept"==i?(Modal.open($(".confirm-accept-invite"),{id:"confirm-accept-invite-modal"}),$(".btn-accept-invite-confirm").click(function(){Modal.close(),$.ajax(u).done(p)})):$.ajax(u).done(p)):"TEAM_INVITE_COACH_REQUEST"==r?(u.url="/social/notifications/coachInvite/"+i,$.ajax(u).done(p)):"TEAM_INVITE_LINK_REQUEST"==r&&(u.url="/social/notifications/teamLink/"+i,"accept"==i?(Modal.open($(".confirm-accept-invite"),{id:"confirm-accept-invite-modal"}),$(".btn-accept-invite-confirm").click(function(){Modal.close(),$.ajax(u).done(p)})):$.ajax(u).done(p)),"CLUB_INSTRUCTOR_INVITE_REQUEST"==r&&(u.url="/social/notifications/clubInstructorInvite/"+i,$.ajax(u).done(p),"accept"===i)){var d=$(".js-club-name").html(),f=Messages["ffc.invitation_notification_accepted"].replace("{0}",d.toString());$.flashMessage(f,"success")}}}),e.find(".remove-system-notification").unbind(),e.find(".remove-system-notification").bind("click",function(t){t.preventDefault();var n=JSON.stringify({id:$(this).parent().data("ui-notifications-system-id")});$.ajax({type:"POST",url:"/social/notifications/removeSystemNotification",data:n,dataType:"json",cache:!1,contentType:"application/json; charset=utf-8"}).done(function(t){if("error"===t)location.reload();else{e.find(".request[data-ui-notifications-system-id='"+t+"']").remove();setTimeout(function(){e.html().length<30&&e.html("").append('<div class="item"><p>'+Messages["notifications.zero_notifications"]+"</p></div>")},200)}})}),SocialUtils.clearRequestPending("listNotifications")}function showLoadSpinner(){$("#loading-spinner").removeClass("is-passive fadeOut"),spinner.add("#spinner")}function hideLoadSpinner(){var e=$("html").hasClass("csstransitions")?1e3*$("#loading-spinner").css("transition-duration").replace(/s/g,""):300;$("#loading-spinner").addClass("fadeOut").delay(e).queue(function(){$(this).addClass("is-passive").dequeue(),spinner.remove("#spinner")})}function getAjaxContentLogin(){$(".ajaxed-content").unbind("click"),$(".ajaxed-content").on("click",function(e){if(AppGlobal.isMobile||e.preventDefault(),"/login"!==window.location.pathname){e.preventDefault();var t=$(this).attr("href"),n=$(".append-ajax"),o=function(e){return String(e).replace(/<\!DOCTYPE[^>]*>/i,"").replace(/<(html|head|body|title|meta|script)([\s\>])/gi,'<div class="document-$1"$2').replace(/<\/(html|head|body|title|meta|script)\>/gi,"</div>")};$.ajax({url:t,success:function(e){$data=$(o(e)),$dataAjaxedContent=$data.find("#ajaxed"),resetPwdContent=$dataAjaxedContent.html()||$data.html(),n.html(resetPwdContent),getAjaxContentLogin()}})}}),submitLogin()}function submitLogin(){$("#loginForm").submit(function(e){e.preventDefault();var t=$(this),n=$("#login");return spinner.add(n),jsRoutes.controllers.ApplicationTask.login().ajax({data:t.serialize(),success:function(e){window.location=e},error:function(e){e.responseText.indexOf("data.missing")!=-1?location.reload():(FormUtils.renderFormFromResponse(t,$.parseJSON(e.responseText)),spinner.reset(n))}}),!1}),$(this).find("input").placeholder({force:!1}),$(this).find("input").first().focus()}var classes=function(){};String.prototype.format||(String.prototype.format=function(){var e=arguments;return this.replace(/{(\d+)}/g,function(t,n){return void 0!==e[n]?e[n]:t})}),String.prototype.capitalize||(String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)}),String.prototype.endsWith||(String.prototype.endsWith=function(e,t){var n=this.toString();("number"!=typeof t||!isFinite(t)||Math.floor(t)!==t||t>n.length)&&(t=n.length),t-=e.length;var o=n.indexOf(e,t);return o!==-1&&o===t});var DateUtils={};DateUtils.firstDayOfWeek=0,DateUtils.dateToMidnight=function(e){return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e},DateUtils.millisToThreeDigitTime=function(e){var t,n,o="";return void 0===e||null==e||e<0?"00:00:00":(t=Math.floor(e/36e5),1===t.toString().length&&(t="0"+t),n=Math.floor(e%36e5/6e4),1===n.toString().length&&(n="0"+n),o=Math.floor(e%36e5%6e4/1e3),1===o.toString().length&&(o="0"+o),t+":"+n+":"+o)},DateUtils.millisToSignedThreeDigitTime=function(e,t){if(void 0===e||null==e)return 0;var n=e>0?"-":"+",o=Math.abs(e);switch(t){case"hh:mm:ss":var r=Math.floor(o/36e5);1===r.toString().length&&(r="0"+r);var i=Math.floor(o%36e5/6e4);1===i.toString().length&&(i="0"+i);var s=Math.floor(o%36e5%6e4/1e3);return 1===s.toString().length&&(s="0"+s),n+r+":"+i+":"+s;case"mm:ss":var i=Math.floor(o%36e5/6e4),s=Math.floor(o%36e5%6e4/1e3);return 1===s.toString().length&&(s="0"+s),n+i+":"+s;default:var s=Math.floor(o%36e5%6e4/1e3);return n+s+" "+Messages["common.abbreviations.unitOfSecond.short"]}},DateUtils.startOfThisWeek=function(e){if(void 0===e||null==e||""===e)return CommonHelpers.log("ERROR - cannot convert ",e," returning empty string"),"";switch(DateUtils.firstDayOfWeek){case 6:return 0===e.getDay()?e:moment(e).startOf("isoWeek").subtract(1,"days").toDate();case 5:return 6===e.getDay()?e:0===e.getDay()?moment(e).startOf("isoWeek").add(5,"days").toDate():moment(e).startOf("isoWeek").subtract(2,"days").toDate();default:return 1===e.getDay()?e:moment(e).startOf("isoWeek").toDate()}},DateUtils.endOfThisWeek=function(e){switch(DateUtils.firstDayOfWeek){case 6:return 5===e.getDay()?e:moment(e).endOf("isoWeek").add(6,"days").toDate();case 5:return 4===e.getDay()?e:moment(e).endOf("isoWeek").add(5,"days").toDate();default:return 0===e.getDay()?e:moment(e).endOf("isoWeek").toDate()}},DateUtils.convertNonIsoToIsoWeek=function(e){if(void 0===e||null==e||""===e)return CommonHelpers.log("ERROR - cannot convert ",e," returning ",1),1;switch(CommonHelpers.weekStartDay){case 7:if(0===e.getDay()){var t=moment(e).add(1,"days").toDate();return moment(t).isoWeek()}var t=moment(e).add(1-e.getDay(),"days").toDate();return moment(t).isoWeek();case 6:if(0===e.getDay()){var t=moment(e).add(1,"days").toDate();return moment(t).isoWeek()}if(1===e.getDay())return moment(e).isoWeek();if(6===e.getDay()){var t=moment(e).add(2,"days").toDate();return moment(t).isoWeek()}var t=moment(e).add(-1*(e.getDay()-1),"days").toDate();return moment(t).isoWeek();default:return moment(e).isoWeek()}},DateUtils.startOfThisMonth=function(e){return new Date(e.getFullYear(),e.getMonth(),1)},DateUtils.endOfThisMonth=function(e){return new Date(e.getFullYear(),e.getMonth()+1,0)},DateUtils.startOfThisYear=function(e){return new Date(e.getFullYear(),0,1)},DateUtils.endOfThisYear=function(e){return new Date(e.getFullYear(),12,0)},DateUtils.plusWeeks=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+7*t)},DateUtils.minusWeeks=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate()-7*t)},DateUtils.plusMonths=function(e,t){var n=(e.getDate(),e),o=DateUtils.endOfThisMonth(n);return n.getDate()!==o.getDate()?new Date(e.getFullYear(),e.getMonth()+1,e.getDate()):(e=new Date(e.getFullYear(),e.getMonth()+1,1),e=DateUtils.endOfThisMonth(e))},DateUtils.getDaysBetween=function(e,t){var n=new Date(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0),o=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0),r=(n.getTime()-o.getTime())/864e5;return Math.floor(r)},DateUtils.getDayOfYear=function(e){var t=new Date(e.getFullYear(),0,0,0,0,0);return DateUtils.getDaysBetween(t,e)},DateUtils.convertWeekStartDayForBootstrapDatePicker=function(e){return 7===e?0:e},DateUtils.convertDateFormatForBootstrapDatePicker=function(e){return e.indexOf("MM")>=0&&(e=e.replace("MM","mm")),e},DateUtils.convertDateFormatForJqueryDatePicker=function(e){return e.indexOf("yyyy")>=0&&(e=e.replace("yyyy","yy")),e},DateUtils.millisAsUTC=function(e){var t=moment.utc(e),n=t.toDate();return n.setHours(t.hours()),n.setMinutes(t.minutes()),n},DateUtils.msToTime=function(e){var t=(parseInt(e%1e3/100),parseInt(e/1e3%60)),n=parseInt(e/6e4%60),o=parseInt(e/36e5);return o=o<10?"0"+o:o,n=n<10?"0"+n:n,t=t<10?"0"+t:t,o+":"+n+":"+t},DateUtils.getMinutesAsText=function(e){if(null==e||""==e||e<=0||!e||void 0===e)return"00:00";var t=e;return t*=60,DateUtils.getDurationAsTextWithMinutesSeconds(t)},DateUtils.getDurationAsTextWithMinutesSeconds=function(e){if(void 0===e||"0"==e||""==e||isNaN(e))return"00:00";var t=Math.round(e),n=0;t>=3600&&(n=Math.floor(t/3600));var o=t-3600*n;o>0&&(o=Math.floor(o/60));var r=0;return t-(3600*n+60*o)>0&&(r=Math.round(t-(3600*n+60*o))),0===n?n="":1===n.toString().length?n="0"+n+":":n+=":",1===o.toString().length?o="0"+o+":":o+=":",1===r.toString().length&&(r="0"+r),n+o+r},DateUtils.getMonthName=function(e){return Date.locale.month_names[e]},DateUtils.getMonthNameShort=function(e){return Date.locale.month_names_short[e]},DateUtils.setMomentFirstDayOfTheWeek=function(e){var t=0;e&&(t=e),t%=7,moment.locale(moment.locale(),{week:{dow:(t-7)*(0==t?0:1)+1,doy:4}})};var FormUtils={};FormUtils.renderLoginFormFromResponse=function(e,t){var n=$.parseJSON(t.responseText),o=!1;void 0!==n.global&&(o=!0),e.find(".control-group").each(function(){$(this);$(this).find(":input").each(function(){void 0!==n[$(this).attr("id")]&&(o=!0)})}),o===!0&&(e.find(".control-group").addClass("error"),e.find(".control-group:last").find(":input:last").attr("data-original-title",n.global),e.find(".control-group:last").find(":input:last").tooltip("show"))},FormUtils.renderFormFromResponse=function(e,t){t&&e.find(".control-group").each(function(){var e=$(this),n=e.find(":input"),o=e.find(".controls");e.removeClass("error"),o.children("p").remove(),n.each(function(){var n=$(this),r=n.attr("name"),i=!0;void 0!==t[r]&&(e.addClass("error"),0===o.children("p").length&&(i=!1,o.append('<p class="help-block">'+t[n.attr("name")]+"</p>"))),i&&o.append('<p class="help-block"></p>')})})},FormUtils.renderErrorsFromResponse=function(e){if($(".control-group").removeClass("error"),$(".control-group").find("p.help-block").text(""),e&&e.responseText){var t=JSON.parse(e.responseText),n=Object.keys(t);if(n.length>0)for(var o=0;o<n.length;o++){var r=$("#"+n[o]);$(r).parents(".control-group:visible").find(".help-block").text(t[n[o]]),$(r).parents(".control-group:visible").addClass("error")}}},FormUtils.initRecaptchaScript=function(){var e="https://www.google.com/recaptcha/api.js?onload=renderRecaptcha&render=explicit";if(0===$('script[src="'+e+'"]').length){var t=document.createElement("script");t.type="text/javascript",t.src=e,document.getElementsByTagName("head")[0].appendChild(t)}},CommonHelpers=function(){},CommonHelpers.units="METRIC",CommonHelpers.decimal=".",CommonHelpers.progressUrlDateFormat="yyyyMMdd",CommonHelpers.urlDateFormat="dd.MM.yyyy",CommonHelpers.dateFormat="dd.MM.yyyy",CommonHelpers.dateFormatNZ="d.M.yyyy",CommonHelpers.dateFormatShortNZ="d.M.",CommonHelpers.timeFormat="HH:mm",CommonHelpers.hourFormat="HH",CommonHelpers.dateSeparator=".",CommonHelpers.weekStartDay=1,CommonHelpers.language="en",CommonHelpers.backgroundColor="#F2F2F2",CommonHelpers.textColor="#262626",CommonHelpers.textColorSecondary="#CCCCCC",CommonHelpers.textColorInverted="#FFF",CommonHelpers.reportsLabelsColor="#808080",CommonHelpers.brandColor="#D10027",CommonHelpers.basicFont="Helvetica, Arial, sans-serif",CommonHelpers.ascentDescentColors=["#0FACE7","#F70F42"],CommonHelpers.zoneColors=["#c2caca","#46C7EE","#6ACC2B","#F9BF1C","#DE0F5B"],CommonHelpers.powerZoneColors=["#F9DB46","#F9BF1C","#FC9727","#FC771E","#F64A07"],CommonHelpers.sportsColors=["#CF102F","#D83855","#E1697F","#EC9BAA","#F5CCD4"],CommonHelpers.benefitColors=["#009de1","#33b1e7","#66c4ed","#99d8f3","#b1dff2","#c9e6f2"],CommonHelpers.speedZoneColors=["#72E88B","#37DBDB","#08CCF9","#0FACE7","#1280DB"],CommonHelpers.activeTimeColors=["#0292A2","#05CDDC","#69F0FA"],CommonHelpers.allActiveTimeColors=["#0292A2","#05CDDC","#69F0FA","#DFECEC","#FFFFFF","url(#non-wear-pattern)"],CommonHelpers.sleepColors=["#009BE0","rgba(0, 155, 224, .4)"],CommonHelpers.chartBarColors=[],CommonHelpers.chartBarColors.trainingReport="#E71735",CommonHelpers.chartBarColors.activityReport="#05CDDC",CommonHelpers.chartBarColors.activityBorder="#CCCCCC",CommonHelpers.chartLineColors=[],CommonHelpers.chartLineColors.averageHR="#D10027",CommonHelpers.chartLineColors.averageSpeed="#0028ce",CommonHelpers.chartLineColors.maximumHR="#D10027",CommonHelpers.chartLineColors.maximumSpeed="#0028ce",CommonHelpers.chartLineColors.altitude="#808080",CommonHelpers.chartLineColors.cadence="#4F8D06",CommonHelpers.chartLineColors.averageCadence="#4F8D06",CommonHelpers.chartLineColors.maximumCadence="#747f33",CommonHelpers.chartLineColors.strideLength="#262626",CommonHelpers.chartLineColors.temperature="#4d759e",CommonHelpers.chartLineColors.power="#FF9933",CommonHelpers.chartLineColors.left_right_balance="#FF1FF4",CommonHelpers.chartLineColors.left_right_balance_alpha="rgba(255, 31, 244, .5)",CommonHelpers.chartLineColors.fatPercent="#B5164B",CommonHelpers.chartLineColors.weight="#0EC639",CommonHelpers.chartLineColors.leftForce="#FF0086",CommonHelpers.chartLineColors.rightForce="#0FACE7",CommonHelpers.chartLineColors.forceTxtColor="#262626",CommonHelpers.chartLineColors.runningIndex="#4668B3",CommonHelpers.chartLineColors.activityGoalCompletion="#006600",CommonHelpers.chartLineColors.allActiveTime="#006666",CommonHelpers.chartLineColors.activeTime="#006699",CommonHelpers.chartLineColors.sleep="#009BE0",CommonHelpers.chartLineColors.activityDistance="#330066",CommonHelpers.chartLineColors.activityCalories="#F64A07",CommonHelpers.chartLineColors.restfullSleep="#660033",CommonHelpers.chartLineColors.activitySteps="rgba(153, 153, 153, .4)",CommonHelpers.chartLineColors.inactivityAlertCount="#FC9727",CommonHelpers.chartLineColors.racePace="#262626",CommonHelpers.chartLineColors.push("#808080"),CommonHelpers.chartLineColors.push("#A5B572"),CommonHelpers.chartLineColors.push("#D8BA58"),CommonHelpers.chartLineColors.push("#B73C69"),CommonHelpers.routeBackgroundColor="#ffffff",CommonHelpers.routeDefaultColor="#000000",CommonHelpers.routeBasicHighlightColor="#d52648",CommonHelpers.routeDefaultSampleHighlightColor="#cccccc",CommonHelpers.routeRacePaceAheadHighlightColor="#d10027",CommonHelpers.routeRacePaceBehindHighlightColor="#2fc16a",CommonHelpers.selectedSliderRangeColor="#dc2944",CommonHelpers.unSelectedSliderRangeColor="grey",CommonHelpers.calendarIntervalDay="DAY",CommonHelpers.calendarIntervalWeek="WEEK",CommonHelpers.calendarIntervalMonth="MONTH",CommonHelpers.oneMileAsKm=1.60934,CommonHelpers.oneKmPerHourInMilesPerHour=.621371192,CommonHelpers.oneKmPerHourInSecondsPer100yards=329.184,CommonHelpers.oneCmInInches=.393700787,CommonHelpers.oneMeterInFeets=3.2808399,CommonHelpers.oneKgInLbs=2.204622622,CommonHelpers.oneWPerKgInWPerLbs=.45359237,CommonHelpers.oneFootInInches=12,CommonHelpers.oneMeterAsYards=1.09361,CommonHelpers.flashMessageTimeout=5e3,CommonHelpers.isAjaxedPasswordReset=!1,CommonHelpers.baseUrl="",CommonHelpers.context={},CommonHelpers.screenSmMax=991,CommonHelpers.getLineColorForData=function(e,t){var n=[],o=0;for(o;o<t.length;o++)n.push(t[o].value);var r="#808080";if(void 0===e||void 0===t)return r;if("averageHR"===e||"maximumHR"===e||"averageSpeed"===e||"maximumSpeed"===e||"averageCadence"===e||"maximumCadence"===e||"weight"===e||"fatPercent"===e||"runningIndex"===e||"inactivityAlertCount"===e)r=CommonHelpers.chartLineColors[e];else{var i=0;for(o=0;o<t.length;o++)if("averageHR"!==t[o].value&&"maximumHR"!==t[o].value&&"averageSpeed"!==t[o].value&&"maximumSpeed"!==t[o].value){if(!CommonHelpers.arrayContains(n,e)){r=CommonHelpers.chartLineColors[n.length];break}if(t[o].value===e){r=CommonHelpers.chartLineColors[e];break}i++}}return r},CommonHelpers.lightenColor=function(e,t){if(e){var n=parseInt(e.slice(1),16),o=Math.round(2.55*t),r=(n>>16)+o,i=(n>>8&255)+o,s=(255&n)+o;return"#"+(16777216+65536*(r<255?r<1?0:r:255)+256*(i<255?i<1?0:i:255)+(s<255?s<1?0:s:255)).toString(16).slice(1)}return"#FFFFFF"},window.console?(CommonHelpers.log=Function.prototype.call.bind(console.log,console),CommonHelpers.log.apply(console)):CommonHelpers.log=function(){},CommonHelpers.parseFloat=function(e){if(","==CommonHelpers.decimal){var t=e.toString().replace(",",".");return parseFloat(t)}return parseFloat(e)},CommonHelpers._zeroize=function(e){return void 0===e||null==e?0:(e<0||e>9?"":"0")+e},CommonHelpers.stringToDate=function(e,t){var n=t.indexOf("d");n<0&&t.indexOf("D");var o=t.lastIndexOf("d");o<0&&t.lastIndexOf("D");var r=t.indexOf("m");"-1"==r&&(r=t.indexOf("M"));var i=t.lastIndexOf("m");"-1"==i&&(i=t.lastIndexOf("M"));var s=t.indexOf("y"),a=t.lastIndexOf("y")+1;i++,o++;var l=e.substring(s,a);e.substring(r,i);return new Date(l,Number(e.substring(r,i))-1,e.substring(n,o),0,0,0)},CommonHelpers.stringIsEmpty=function(e){return!e||0===e.length},CommonHelpers.localDateTimeToDate=function(e){var t=new String(e).split(",");return new Date(t[0],parseInt(t[1])-1,t[2],t[3],t[4],t[5],t[6])},CommonHelpers.localDateToDate=function(e){return new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds())},CommonHelpers.formatDate=function(e,t){t+="";var n="",o=0,r="",i="",s=e.getYear()+"",a=e.getMonth()+1,l=e.getDate(),m=(e.getDay(),e.getHours()),c=e.getMinutes(),u=e.getSeconds(),p={};for(s.length<4&&(s=""+(s-0+1900)),p.y=""+s,p.yyyy=s,p.yy=s.substring(2,4),p.M=a,p.MM=CommonHelpers._zeroize(a),p.d=l,p.dd=CommonHelpers._zeroize(l),p.H=m,p.HH=CommonHelpers._zeroize(m),p.h=0==m?12:m>12?m-12:m,p.hh=CommonHelpers._zeroize(p.h),p.K=m>11?m-12:m,p.k=m+1,p.KK=CommonHelpers._zeroize(p.K),p.kk=CommonHelpers._zeroize(p.k),p.a=m>11?"PM":"AM",p.m=c,p.mm=CommonHelpers._zeroize(c),p.s=u,p.ss=CommonHelpers._zeroize(u);o<t.length;){for(r=t.charAt(o),i="";t.charAt(o)==r&&o<t.length;)i+=t.charAt(o++);n+=null!=p[i]?p[i]:i}return n},CommonHelpers.combineDuration=function(e,t,n){return""===e&&""===t&&""===n?"":(""===e&&(e="00"),""===t&&(t="00"),""===n&&(n="00"),e+":"+t+":"+n)},CommonHelpers.splitDuration=function(e){var t={hours:"",minutes:"",seconds:""};if(!e)return t;var n="00",o="00",r="00";if(e){var e=e.split(":");e.length>2?(n=e[0],o=e[1],r=e[2]):(n="00",o=e[0],r=e[1])}return t.hours=n,t.minutes=o,t.seconds=r,t},CommonHelpers.getDurationAsSeconds=function(e){if("00:00:00"==e||""==e||void 0==e)return 0;var t=e.toString(),n=t.split(":"),o=0,r=0,i=0;3==n.length?(o=Number(n[0]),r=Number(n[1]),i=Number(n[2])):2==n.length&&(r=Number(n[0]),i=Number(n[1])),i=60*o*60+60*r+i;var s=Number(i);return isNaN(s)?0:s},CommonHelpers.getMillisAsDuration=function(e){return CommonHelpers.getSecondsAsDuration(e/1e3)},CommonHelpers.getSecondsAsDuration=function(e){if(void 0===e||"0"==e||""==e||isNaN(e))return"00:00:00";var t=0;e>=3600&&(t=Math.floor(e/3600));var n=e-3600*t;n>0&&(n=Math.floor(n/60));var o=0;return e-(3600*t+60*n)>0&&(o=Math.floor(e-(3600*t+60*n))),1==t.toString().length&&(t="0"+t),1==n.toString().length&&(n="0"+n),1==o.toString().length&&(o="0"+o),t+":"+n+":"+o},CommonHelpers.getMillisAsDurationWithTenthOfSeconds=function(e){if(void 0===e||"0"==e||""==e||isNaN(e)||e<=0)return"00:00:00.0";var t=e%1e3/100;return CommonHelpers.getSecondsAsDuration(e/1e3)+"."+Math.floor(t)},CommonHelpers.getSecondsAsShortDuration=function(e){if(void 0===e||"0"==e||""==e)return"00:00";var t=0;e>=3600&&(t=Math.floor(e/3600));var n=e-3600*t;return n>0&&(n=Math.floor(n/60)),1==t.toString().length&&(t="0"+t),1==n.toString().length&&(n="0"+n),t+":"+n},CommonHelpers.getSecondsAsDurationValues=function(e){var t=0,n=0,o=0;return parseInt(e)>0&&(t=Math.floor(e/86400),n=Math.floor(e%86400/3600),o=Math.floor(e%86400%3600/60)),{days:t,hours:n,minutes:o}},CommonHelpers.getSecondsAsDurationLongText=function(e){var t=CommonHelpers.getSecondsAsDurationValues(e);return(t.days>0?t.days+" "+Messages["common.abbreviations.unitOfDays"]+" ":"")+t.hours+" "+Messages["common.abbreviations.unitOfHours"]+" "+(t.days>0?"":t.minutes+" "+Messages["common.abbreviations.unitOfMinutes"])},CommonHelpers.getSecondsAsDurationShortText=function(e){var t=CommonHelpers.getSecondsAsDurationValues(e);return(t.days>0?t.days+" "+Messages["common.abbreviations.unitOfDay.short"]+" ":"")+t.hours+" "+Messages["common.abbreviations.unitOfHour.short"]+" "+(t.days>0?"":t.minutes+" "+Messages["common.abbreviations.unitOfMinute.short"])},CommonHelpers.getSecondsAsFormattedDuration=function(e){if(void 0===e||"0"==e||""==e)return"0min 0sec";var t=CommonHelpers.getSecondsAsDuration(e),n=[];n=t.split(":");var o="";parseInt(n[0],10)>0&&(o=n[0]+"h ");var r=n[1]+"min ",i=n[2]+"sec";return"00"===n[2]&&(i=""),o+r+i},CommonHelpers.metersToKm=function(e,t){return void 0===t&&(t=1),"METRIC"===CommonHelpers.units?CommonHelpers.round(e/1e3,t).toFixed(t):CommonHelpers.round(.000621371192*e,t).toFixed(t)},CommonHelpers.metersToKmText=function(e,t){var n=CommonHelpers.metersToKm(e,t).toString();return"METRIC"===CommonHelpers.units&&(n=n.replace(".",",")),n},CommonHelpers.metersToKmTextWithUnit=function(e,t){var n=CommonHelpers.metersToKm(e,t).toString();return"METRIC"===CommonHelpers.units?(n=n.replace(".",","),n+=" "+Messages["common.abbreviations.unitOfKilometers"]):n+=" "+Messages["common.abbreviations.unitOfMiles"],n},CommonHelpers.KmsToMeters=function(e){return"METRIC"===CommonHelpers.units?(e=""+e,e=e.toString().replace(",","."),""+1e3*Number(e)):(e=""+e,e=e.toString().replace(",","."),""+1e3*Number(e)*CommonHelpers.oneMeterInFeets)},CommonHelpers.metersToYards=function(e,t){return void 0===t&&(t=1),CommonHelpers.round(e*CommonHelpers.oneMeterAsYards,t).toFixed(t)},CommonHelpers.millisToPaceStr=function(e){var t=Math.round(e/1e3),n=Math.floor(t/60);t-=60*n;var o="";n<10&&(o="0");var r="";return t<10&&(r="0"),o+n+":"+r+t},CommonHelpers.speedToPace=function(e){var t=CommonHelpers.parseFloat(e);if(isNaN(t))return"";if(0==t)return CommonHelpers.millisToPaceStr(0);var n=Math.round(1/t*36e5);return CommonHelpers.millisToPaceStr(n)},CommonHelpers.paceToSpeed=function(e){if(void 0===e||""===e)return"";var t=CommonHelpers.paceStrToMillis(e);return 0===t?"0":t?CommonHelpers.round(36e5/t,2):""},CommonHelpers.paceStrToMillis=function(e){try{var t=e.split(":");if(2==t.length){var n=parseInt(t[0],10),o=parseInt(t[1],10);return isNaN(n)||isNaN(o)?null:1e3*(60*Number(n)+Number(o))}if(1==t.length){var n=parseInt(t[0]);return isNaN(n)?null:60*Number(n)*1e3}if(3==t.length){var r=t[0],n=t[1],o=t[2];return isNaN(r)||isNaN(n)||isNaN(o)?null:1e3*(3600*Number(r)+60*Number(n)+Number(o))}return null}catch(e){return CommonHelpers.log(e),null}},CommonHelpers.convertSpeedToImperialSpeed=function(e){return"METRIC"===CommonHelpers.units?e:e*CommonHelpers.oneKmPerHourInMilesPerHour},CommonHelpers.convertSwimmingMetricPaceToSwimmingYardsPace=function(e){return isNaN(e)?0:0==e?0:e/CommonHelpers.oneMeterAsYards},CommonHelpers.convertCentimetersToInches=function(e){return"METRIC"===CommonHelpers.units?e:e*CommonHelpers.oneCmInInches},CommonHelpers.convertKgToLbs=function(e){return e*CommonHelpers.oneKgInLbs},CommonHelpers.convertLbsToKg=function(e){return e/CommonHelpers.oneKgInLbs},CommonHelpers.convertCmToIn=function(e){return e*CommonHelpers.oneCmInInches},CommonHelpers.convertInToCm=function(e){return e/CommonHelpers.oneCmInInches},CommonHelpers.convertWPerKgToWPerLb=function(e){return e*CommonHelpers.oneWPerKgInWPerLbs},CommonHelpers.convertWPerLbToWPerKg=function(e){return e/CommonHelpers.oneWPerKgInWPerLbs},CommonHelpers.convertMetersToFeet=function(e){return null!=e?3.28*e:0},CommonHelpers.convertMpsToKmh=function(e){return null!=e?3.6*e:0},CommonHelpers.convertSecondsPerMeterToSpeed=function(e){if(null!=e){var t=CommonHelpers.convertMpsToKmh(1/e);return"METRIC"===CommonHelpers.units?t:CommonHelpers.convertSpeedToImperialSpeed(t)}return 0},CommonHelpers.convertCentigradesToFarenheit=function(e){return null!=e?1.8*e+32:32},CommonHelpers.roundFloorJumpTestResult=function(e,t){return t?parseInt(e):Math.floor(10*CommonHelpers.convertCmToIn(e))/10},CommonHelpers.calculateDistanceSamplesFromSpeed=function(e,t){for(var n=[],o=t/3.6,r=0,i=0;i<e.length;i++)r+=e[i]*o,n.push(r);return n},CommonHelpers.calculateSecondsFromDistanceAndSpeed=function(e,t,n){return"PACE"===n?parseFloat(e)*parseFloat(t)*60:parseFloat(e)/parseFloat(t)*3600},CommonHelpers.calculateSpeedFromDurationAndDistance=function(e,t,n){var o="";if("PACE"===n)o=CommonHelpers.getDurationAsSeconds(e)/60/parseFloat(t),o=CommonHelpers.millisToPaceStr(60*CommonHelpers.round(o,3)*1e3);else if(o=parseFloat(t)/(CommonHelpers.getDurationAsSeconds(e)/3600),o=CommonHelpers.round(o,2),o.toString().indexOf(".")==-1)return o+".00";return o},CommonHelpers.round=function(e,t){return 0===t?Math.round(e):Math.round(e*Math.pow(10,t))/Math.pow(10,t)},CommonHelpers.percentageToString=function(e){return CommonHelpers.round(e,1).toFixed(0).toString()+"%"},CommonHelpers.roundToNearestGivenValue=function(e,t,n){var o=parseInt(""+e/t,10);return n?o*t+t:o*t},CommonHelpers.roundToNearestTen=function(e,t){var n=parseInt(""+e/10,10);return t?10*n+10:10*n},CommonHelpers.roundToNearestFive=function(e,t){var n=parseInt(""+e/5,10);return t?5*n+5:5*n},CommonHelpers.format2Digits=function(e){if(null==e||void 0===e||""==e.toString())return"0.00";var t="";if(e.toString().indexOf(".")<1)e+=".00",t=e;else{var n=e.toString().split("."),o=n[1].substr(0,1),r=n[1].substr(1,1),i=n[1].substr(2,1);Number(i)>=5&&(r=Number(r),r++,2==r.toString().length&&(r=0,o++),2==o.toString().length&&(o=0,n[0]++)),t=n[0]+"."+o+r}return t},CommonHelpers.convertFeetsInchechToCm=function(e,t){var n=Number(12*e)+Number(t);return Number(n)*Number(2.54)},CommonHelpers.arrayContains=function(e,t){for(var n=e.length;n--;)if(e[n]===t)return!0;return!1},CommonHelpers.getClosestIndex=function(e,t,n){void 0===n&&(n=0);for(var o=-1,r=e.length;r-o>1;){var i=Math.round((o+r)/2);e[i][n]<=t?o=i:r=i}return e[o][n]==t&&(r=o),o},CommonHelpers.spinnerMarkup='<div class="spinner__container"><div class="spinner__round spinner__round1"></div> <div class="spinner__round spinner__round2"></div> <div class="spinner__round spinner__round3"></div></div>',CommonHelpers.Spinner=function(){this.spinners=[],this.markup=CommonHelpers.spinnerMarkup,this.oldContent=[]},CommonHelpers.Spinner.prototype.add=function(e){this.oldContent.push($(e).html()),$(e).html(this.markup),this.spinners.push(e)},CommonHelpers.Spinner.prototype.append=function(e){this.oldContent.push(""),$(e).append(this.markup),this.spinners.push(e)},CommonHelpers.Spinner.prototype.remove=function(e){if($(e).find(".spinner__container").length>0){$(e).find(".spinner__container").remove();var t=this.spinners.indexOf(e);t>-1&&(this.spinners.splice(t,1),this.oldContent.splice(t,1))}},CommonHelpers.Spinner.prototype.reset=function(e){var t=this.spinners.indexOf(e);$(e).find(".spinner__container").length>0&&($(e).html(this.oldContent[t]),t>-1&&(this.spinners.splice(t,1),this.oldContent.splice(t,1)))},
CommonHelpers.Spinner.prototype.removeAll=function(){for(key in this.spinners)$(this.spinners[key]).html("");this.spinners,this.oldContent=[]},UIComponents=function(){},UIComponents.changeChoiseListSelection=function(e,t){e.find("li").each(function(){$(this).removeClass("active")}),t.addClass("active")},Converter=function(){},Converter.Distance={},Converter.Distance.convertForView=function(e){if(this.error=null,null!=e){e=""+e,e=e.toString().replace(",",".");var t=CommonHelpers.metersToKm(e,2);return 0==parseFloat(""+t)&&(t=CommonHelpers.metersToKm(e,2)),t}return""},Converter.Distance.convertForServer=function(e){return"METRIC"===CommonHelpers.units?(e=""+e,e=e.toString().replace(",","."),""+1e3*Number(e)):(e=""+e,e=e.toString().replace(",","."),""+1e3*Number(e)*1.60934)},ListUtils=function(){},ListUtils.getTableRowCountForGivenDate=function(e,t){for(var n=1,o=new Date(e[t].startingTime),r=t+1;r<e.length;r++){var i=new Date(e[r].startingTime);if(o.getYear()!==i.getYear()||DateUtils.getDayOfYear(o)!==DateUtils.getDayOfYear(i))break;n++}var s;return t>=1&&(s=new Date(e[t-1].startingTime),o.getYear()==s.getYear()&&DateUtils.getDayOfYear(o)==DateUtils.getDayOfYear(s)&&(n=Number(0))),n==Number(0)?Number(0):n},ExerciseUtils=function(){},ExerciseUtils.calculateAscentAndDescent=function(e){for(var t=e[0],n=e[0],o=e[0],r=0,i=0,s=0,a=0;a<e.length;a++)r=e[a],r>o?(o<=t&&(t=o),r-t>=4.8&&(i+=r-t,t=r)):r<o&&(o>=n&&(n=o),n-r>=4.8&&(s+=n-r,n=r)),o=r;return i-=ExerciseUtils.findFirstNonZeroValue(e),s-=ExerciseUtils.findLastNonZeroValue(e),i<0&&(i=0),s<0&&(s=0),{ascent:i,descent:s}},ExerciseUtils.findFirstNonZeroValue=function(e){if(0==e[0])for(var t=0;t<e.length;t++){var n=e[t];if(n>0||n<0)return n}return 0},ExerciseUtils.findLastNonZeroValue=function(e){if(0==e[e.length-1])for(var t=e.length-1;t>0;t--){var n=e[t];if(n>0||n<0)return n}return 0},ExerciseUtils.convertSpeedSamplesToImperial=function(e){if("METRIC"!==CommonHelpers.units&&void 0!==e&&null!==e&&e.length>0){for(var t=[],n=0;n<e.length;n++)t.push(e[n]/CommonHelpers.oneMileAsKm);return t}return e},ExerciseUtils.convertAltitudeSamplesToImperial=function(e){if("METRIC"!==CommonHelpers.units&&void 0!==e&&null!==e&&e.length>0){for(var t=[],n=0;n<e.length;n++)t.push(e[n]*CommonHelpers.oneMeterInFeets);return t}return e},ExerciseUtils.convertStrideLengthSamplesToImperial=function(e){if("METRIC"!==CommonHelpers.units&&void 0!==e&&null!==e&&e.length>0){for(var t=[],n=0;n<e.length;n++)t.push(e[n]*CommonHelpers.oneCmInInches);return t}return e},classes.SocialUtils=function(){this.requestPending={listNotifications:!1},this.pageNumber=0},classes.SocialUtils.prototype.clearRequestPending=function(e){this.requestPending[e]=!1},classes.SocialUtils.prototype.isRequestPending=function(e){return this.requestPending[e]},classes.SocialUtils.prototype.setRequestPending=function(e){this.requestPending[e]=!0},classes.SocialUtils.prototype.updatePageNumber=function(){this.pageNumber++},classes.SocialUtils.prototype.clearPageNumber=function(){this.pageNumber=0},classes.SocialUtils.prototype.getPageNumber=function(){return this.pageNumber},classes.SocialUtils.prototype.listNotifications=function(e){var t=this;t.requestPending.listNotifications===!1&&(t.requestPending.listNotifications=!0,$.ajax({type:"GET",url:"/social/getNotifications/"+SocialUtils.getPageNumber(),cache:!1,dataType:"html"}).done(function(t){bindNotificationEvents(e,t),SocialUtils.clearRequestPending("listNotifications"),SocialUtils.bindLoadMoreButton(),SocialUtils.updatePageNumber()}).error(function(e){t.requestPending.listNotifications=!1,$.flashMessage(e)}))},classes.SocialUtils.prototype.bindLoadMoreButton=function(){$("#jsLoadMoreNotifications").unbind("click"),$("#jsLoadMoreNotifications").bind("click",function(e){e.preventDefault();var t=$(this);SocialUtils.isRequestPending("listNotifications")===!1&&(SocialUtils.setRequestPending("listNotifications"),$.ajax({type:"GET",url:"/social/getNotifications/"+SocialUtils.getPageNumber(),cache:!1,dataType:"html"}).done(function(e){$(e).insertBefore(t.parent()),SocialUtils.clearRequestPending("listNotifications"),SocialUtils.bindLoadMoreButton(),SocialUtils.updatePageNumber(),bindNotificationEvents($("#notification-list"),e,!0),e.length<200&&($("#jsLoadMoreNotifications").hide(),$("#jsZeroNotContainer").html("<p>"+Messages["notifications.no_more_notifications"]+" </p>"))}).error(function(e){location.reload()}))})};var SocialUtils=new classes.SocialUtils;GlobalConstants=function(){},GlobalConstants.lap="lap",GlobalConstants.autolap="autolap",GlobalConstants.googleScript="",CalendarUtils=function(){},CalendarUtils.updateSmallCalendarWithCalendarEvents=function(e){null!=e&&void 0!==e&&$(".ui-datepicker-calendar").find("td").each(function(t){var n=$(this).attr("data-year"),o=$(this).attr("data-month"),r=$(this).find("a"),i=r.html();if(void 0!==i){for(var s=new Date(n,o,i),a=CommonHelpers.formatDate(s,"yyyy-MM-dd"),l=0,m=0;m<e.length;m++)a===CommonHelpers.formatDate(new Date(1e3*e[m].start),"yyyy-MM-dd")&&(r.addClass("daily-data-indicator"),l++);l>0&&($(this).find("div").hasClass("event-ind")?$(this).find("div").html(l):$(this).prepend('<div class="event-ind">'+l+"</div>"),$(this).attr("title","Items for day: "+l))}})},Flash=function(){},Flash.showMessage=function(e,t,n){var o=$(".alert-message");o.length||(o=$(document.createElement("div")),o.addClass("alert-message"),o.addClass(t),$(o).append("<p></p>"),$(".alert-wrapper").prepend(o)),$(".alert-message > p").text(e),$(o).addClass("visible"),setTimeout(function(){$(o).removeClass("visible")},n?n:CommonHelpers.flashMessageTimeout)},$(function(){var e=$(".mobile-nav"),t=($(".close-nav"),$(".open-panel")),n=$("#notification-list"),o=$(".open-notification").parent(),r=$("body");AppGlobal.isMobile&&$("html").addClass("is-mobile"),$(".close-nav, .mobile-nav .sign-in").on("click",function(){$(e).removeClass("open"),$(r).removeClass("nav-open")}),$(t).on("click",function(e){e.preventDefault();var t=$(this);$(t).hasClass("open-notification")?($("#notification-new").remove(),$(r).removeClass("nav-open"),$(r).removeClass("feed-open"),o.hasClass("open")||(spinner.add(n.find(".spinner")),SocialUtils.clearPageNumber(),SocialUtils.listNotifications(n))):$(t).hasClass("open-nav")?($(r).toggleClass("nav-open"),$(r).removeClass("feed-open"),o.removeClass("open")):$(t).hasClass("show-feed")&&($(r).toggleClass("feed-open"),o.removeClass("open"),$(r).removeClass("nav-open"),wrapper=document.querySelector("div.wrapper"),setTimeout(function(){$(wrapper).addClass("overflowing")},300))}),$(".close-list").on("click",function(){$(r).removeClass("feed-open")}),spinner.add("#spinner"),$(".sign-in").click(function(e){if($(this).parent().toggleClass("open"),e.preventDefault(),spinner.add($("#sign-in-container").find(".spinner")),$(".alert-error").not(".display-none")&&$(".alert-error").addClass("display-none"),AppGlobal.isMobile===!0||AppGlobal.screenWidth<991)window.location="/login";else{var t="/ajaxLogin";"undefined"!=typeof loginFirst&&loginFirst===!0&&(t="/ajaxLogin?jsReferrer="+encodeURIComponent(document.referrer)),$.ajax({url:t,cache:!1,success:function(e){$("#sign-in-container").html(e),$("#email").focus()}})}}),$(".sign-in-toggle").on("click",function(){$(".sign-in").click()})});var spinner=new CommonHelpers.Spinner;$(window).load(function(){document.getElementById("loading-spinner");setTimeout(function(){hideLoadSpinner()},200)}),function(e){e.flashMessage=function(t,n){var o,r,i,s=e(".alert-wrapper"),a=e(".alert-message.visible").size();n=n||"","object"==typeof t?(t.error&&(o=t.error,n="error"),t.success&&(o=t.success,n="success")):o=t,o&&(r=e('<div class="alert-message"><p></p></div>'),r.addClass(n).addClass("visible"),r.find("p").text(_.unescape(o)),s.hasClass("modal-loaded")?s.after(r):s.prepend(r),i=setTimeout(function(){r.removeClass("visible")},CommonHelpers.flashMessageTimeout+2e3*a),r.on("click",function(){clearTimeout(i),e(this).removeClass("visible")}))},e.flashMessageIsVisible=function(t){if(void 0!==t){var n=!1;return e(".alert-message").each(function(o,r){var i=e(r);if(i.children("p").text()===t&&i.hasClass("visible"))return n=!0,!1}),n}return e(".alert-wrapper .alert-message").hasClass("visible")},e.fn.flashMessage=function(){return this.each(function(t,n){n=e(n);var o,r=e(".alert-message.visible").size();n.addClass("visible"),o=setTimeout(function(){n.removeClass("visible")},CommonHelpers.flashMessageTimeout+2e3*r),n.on("click",function(){clearTimeout(o),e(this).removeClass("visible")})})},e.validationErrors=function(t){var n=t.validationErrors,o=e(document.body);e.each(n,function(t,n){o=n.section||o,o=e(o),e.each(n.errors,function(t,n){var r=Object.keys(n);e.each(r,function(e,t){var r=o.find('[name="'+t+'"]:enabled').closest(".control-group");r.addClass("error"),r.find(".help-block").text("string"==typeof n[t]?n[t]:n[t][0]),r.on("click.dispel",".help-block",function(){r.removeClass("error"),r.find(".help-block").html(""),r.off("click.dispel"),r.find("input,select,textarea").focus()})})})})}}(jQuery),function(e){function t(e){}function n(e){}function o(e){var t=new RegExp(/[0-9][0-9]:[0-9][0-9]:[0-9][0-9]/),n=new RegExp(/[0-9][0-9]:[0-9][0-9]/),o=n.exec(e),r=t.exec(e);if(e&&5==e.length){if(!o)return Messages["error.invalid.format"]+" 12:34"}else if(!r||e&&e.length>8)return Messages["error.invalid.format"]+" 12:34:56"}function r(e){var t;e&&(t=e.match(/[^0-9]/g));var n;if(t&&(n=t[0].replace(",",".")),n&&"."!=n||t&&t.length>1||null==e||""==e)return Messages["error.invalid.number"];var o=parseFloat(e);return isNaN(o)?Messages["error.invalid.number"]:o<0||o>9999?Messages["error.outOfBounds"]+" 0 - 9999.0":void 0}function i(e){return 0===e.length||void 0===e?Messages["error.required"]:0!=e%(!isNaN(parseFloat(e))&&0<=~~e)||null!==e.match(/\+/)?Messages["error.invalid.number"]:void 0}function s(e,t){var n=e.find(".help-block");return 0==n.length||(n.html(""),e.removeClass("error"),null!=t&&(n.html(t),e.addClass("error")),!1)}e.fn.validate=function(a,l){return this.each(function(l,m){m=e(m);var c=e(m).parent(),u=e('<p class="help-block"></p>'),p={defaultValidator:t,duration:o,distance:r,calories:n,racePace:r,number:i},d=a||"defaultValidator",f=p[d.toLowerCase()](m.val());e(c).find(".help-block").remove(),e(c).removeClass("error");var h=s(e(m).closest(".control-group"),f);null!=f&&h&&(e(u).html(f),e(c).append(u),e(c).addClass("error"))})}}(jQuery),function(e){function t(){function e(e,t){n[e]=t}function t(e){return n[e]}var n={};return this.set=e,this.get=t,this}window.ParameterManager=new t}(jQuery),function(e){e.fn.duration=function(){function t(e){e=e.replace(/[^0-9:]/g,"");var t=e.split(":"),n=e.match(/:/g);if(n){for(t=t.splice(0,3);t.length<3;)t.unshift("00");for(var o=0;o<t.length;o++)t[o]=("00"+t[o]).substr(-2)}else n=e.length,e=n<3?("0000"+e+"00").substr(-6):n<4?("0000"+e).substr(-6):("00"+e).substr(-6),t=e.match(/\d{2}/g);return t.join(":")}return this.each(function(n,o){e(o).on("blur",function(){e(this).val(t(e(this).val()))})})}}(jQuery),CommonHelpers.encodeHtml=function(e){return null!=e?jQuery("<div/>").text(e).html():""},CommonHelpers.decodeHtml=function(e){return null!=e?jQuery("<div/>").html(e).text():""},CommonHelpers.refreshPlaceholder=function(e,t){e&&($(e).parent().find(".placeholder").remove(),void 0!==t&&$(e).attr("placeholder",t),$(e).placeholder({force:!1}))},CommonHelpers.calculateSwimmingPaceWithUnits=function(e,t,n){"YARDS"!==n&&"IMPERIAL"!==n||(t=CommonHelpers.metersToYards(t,1));var o=e/1e3/60/60,r=t/o,i=0;return r>0&&(i=60/r),i*=100},CommonHelpers.calculateSwimmingPace=function(e,t){var n=e/1e3/60/60,o=t/n,r=0;return o>0&&(r=60/o),r*=100},CommonHelpers.convertSpeedToSwimmingPace=function(e,t){var n=0;return null!=e&&e>0&&(e*=null!=t&&"YARDS"===t||"IMPERIAL"===t?CommonHelpers.metersToYards(1e3,1):1e3,n=60/e),100*n},CommonHelpers.setEqualHeightForSummaryBlocks=function(){if($(".equal-height-summary-box").length){var e=$(".equal-height-summary-box"),t=CommonHelpers.getMaxHeightOfElements(e);CommonHelpers.setHeightOfElements(e,t)}},CommonHelpers.getMaxHeightOfElements=function(e){var t=0;return e&&e.each(function(){$(this).css({height:"auto"}),$(this).height()>t&&(t=$(this).height())}),t},CommonHelpers.setHeightOfElements=function(e,t){e&&e.each(function(){$(this).css({height:t})})};var AssetHelpers=function(){};AssetHelpers.resource=function(e){return AppGlobal.useMinifiedSources?resourceRoot+e:(e.endsWith(".min.js")?e=e.replace(/\.min\.js$/,".js"):e.endsWith(".min.css")&&(e=e.replace(/\.min\.css$/,".css")),resourceRoot+e)};
//# sourceMappingURL=common_helpers.min.js.map