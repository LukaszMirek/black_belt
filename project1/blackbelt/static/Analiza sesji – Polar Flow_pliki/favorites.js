!function(e){Favorites=function(e){this.element=e.b||e,this.urls=ParameterManager.get("routeUrls")},Favorites.prototype.Route=function(s){function a(){u.clone();e(this.element).append(u),u.on("click",".btn.add",function(){n()}),u.on("click",".btn.close",function(){i()})}function t(){var s=v.clone();e(this.element).parent().append(s),s.on("click",function(){n.call(f)})}function o(){return!localStorage.getItem("hideFavoriteRouteTeaser")}function i(){localStorage.setItem("hideFavoriteRouteTeaser",!0),f.removeControls(),f.showControls()}function n(){var s=p.clone();s=Modal.open(s),this.distance>149&&s.find(".modal-body").prepend('<div class="row"><div class="col-md-12">'+Messages["favorites.routes.long_route"]+"</div></div>"),s.off("click"),s.on("click",".btn.cancel",function(){Modal.close()}),s.on("click",".btn.confirm:not(.disabled)",function(){var a=s.find('input[name="name"]').val();a?(e(this).addClass("disabled"),d(a)):e.flashMessage(Messages["favorites.routes.please_name_route"],"info")})}function d(a){spinner.add("#spinner"),e.ajax({url:f.urls.add,data:{id:s,name:a},type:"POST",dataType:"json",success:function(s){spinner.remove("#spinner"),Modal.close(),i(),e.flashMessage(s)},error:function(s){spinner.remove("#spinner"),Modal.close(),e.flashMessage(JSON.parse(s.responseText))}})}var l='<div class="addFavoriteRoute" id="addFavoriteRoute" class="basic-data-panel"><div><span class="ask label-data">'+Messages["favorites.routes.liked_the_route"]+'</span><span class="hint">'+Messages["favorites.routes.add_the_route"]+'</span></div><div><button class="btn btn-basic add" style="margin-right: 5px;"><i class="icon icon-favorites"></i> <span>'+Messages["favorites.routes.add_route"]+'</span></button><button class="btn btn-icon close"><i class="icon icon-close"></i></button></div>',r='<a id="addFavoriteRoute" class="dropdown-toggle addFavoriteRoute btn btn-icon" href="#" title="'+Messages["favorites.routes.add_route"]+'"><i class="icon icon-favorites"></i></a></div>',c='<div tabindex="-1"><h1><a href="#" class="pull-right modal-close" data-dismiss="modal" aria-hidden="true">&nbsp;</a>'+Messages["favorites.routes.add_route"]+'</h1><div class="modal-body"><div class="row margin-bottom"><div class="col-md-12">'+Messages["favorites.routes.please_name_route"]+'</div></div><div class="row"><div class="control-group col-md-12 required-data"><div class="col-md-3 label-wrapper"><label class="control-label" for="routeName">'+Messages["favorites.routes.route_name"]+'</label></div><div class="controls col-md-7"><div><input type="text" placeholder="'+Messages["favorites.routes.route_name"]+'" name="name" id="routeName" maxlength="45"></div><p class="help-block"></p></div></div></div><div class="modal-footer pull-right"><button class="btn btn-basic btn--highlighted cancel">'+Messages["common.cancel"]+'</button> <button class="btn btn-primary btn--highlighted confirm">'+Messages["common.save"]+"</button></div></div></div>",u=e(l),v=e(r),p=e(c),f=this;return this.distance=e('.feed-item div[data-id="'+s+'"] div[data-distance]').data("distance")||e("input#distanceStr").val(),this.showControls=function(e,s){this.distance&&(o()?a.call(this):t.call(this))},this.removeControls=function(){e("#addFavoriteRoute").remove()},this}}(jQuery);
//# sourceMappingURL=favorites.min.js.map