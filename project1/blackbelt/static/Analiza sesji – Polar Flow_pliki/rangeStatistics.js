RangeStatistics=function(t){this.parent=t},RangeStatistics.prototype.bindEvents=function(){var t=this;$("#resetSelectedRange").on("click",function(a){a.preventDefault(),t.hide()}.bind(this)),$("#rangeStatisticsPrev").on("click",function(t){$.dispatcher.trigger("rangeStatistics.prev")}),$("#rangeStatisticsNext").on("click",function(t){$.dispatcher.trigger("rangeStatistics.next")})},RangeStatistics.prototype.hide=function(){$(".range-statistics-wrapper").hide(),$.dispatcher.trigger("rangeStatistics.hide")},RangeStatistics.prototype.show=function(){$(".range-statistics-wrapper").show(),$.dispatcher.trigger("rangeStatistics.show")},RangeStatistics.prototype.update=function(){this.statsArray=[];var t=this.parent,a=this;t.startIndex==t.minIndex&&t.stopIndex==t.maxIndex||$(".range-statistics-wrapper").show();var s=0,e=0,i=null;if(this.parent.timestamps){var n=this.parent.xAxis.datasets[AnalysisCharts.IDS.duration],r=new RangeStatisticsItem(n.id,n.icon,n.label,n.unit,n.format,n.prefix);s=t.timestamps[t.stopIndex]-t.timestamps[t.startIndex],i=t.getSwimmingSamplesTotalDuration(),r.total=r.format(s),a.statsArray.push(r)}if(this.parent.distances&&this.parent.distances.length>0){var n=this.parent.xAxis.datasets[AnalysisCharts.IDS.distance],r=new RangeStatisticsItem(n.id,n.icon,n.label,n.unit,n.format,n.prefix);r.total=null,e=t.distances[t.stopIndex]-t.distances[t.startIndex],null!=e&&(r.total=r.format(e)),a.statsArray.push(r)}var o=t.getDatasetIndex(AnalysisCharts.IDS.altitude);if(o!=-1){for(var n=this.parent.datasets[o],d=null,c=t.startIndex;c<t.stopIndex;c++){var p=t.timestamps[c],l=t.datasets[o].data[c];d?d.update(p,l):d=new AscentDescentAlgorithm(p,l)}if(d){var h=d.ascent.meters;t.options.metricUnits||(h*=CommonHelpers.oneMeterInFeets),h=CommonHelpers.roundToNearestFive(h,!1);var r=new RangeStatisticsItem("ASCENT","icon-ascent",Messages["analyseview.ascent"],n.unit,null,n.prefix);r.total=h?h:null,a.statsArray.push(r),h=d.descent.meters,t.options.metricUnits||(h*=CommonHelpers.oneMeterInFeets),h=CommonHelpers.roundToNearestFive(h,!1);var r=new RangeStatisticsItem("DESCENT","icon-descent",Messages["analyseview.descent"],n.unit,null,n.prefix);r.total=h?h:null,a.statsArray.push(r)}}this.parent.datasets.forEach(function(n){if(n.show&&n.hasData)if(n.children)n.children.forEach(function(r){if(r.data&&r.avgFormat){var o=new RangeStatisticsItem(r.id,r.icon,n.label,r.unit,r.format,r.prefix);o.update(r,t.startIndex,t.stopIndex,e,s,i)&&a.statsArray.push(o)}});else if(n.data&&n.avgFormat){var r=new RangeStatisticsItem(n.id,n.icon,n.label,n.unit,n.format,n.prefix);r.update(n,t.startIndex,t.stopIndex,e,s,i)&&a.statsArray.push(r)}}),this.draw()},RangeStatistics.prototype.draw=function(){if(this.statsArray){if($(".range-statistics > form > .row").children().length===this.statsArray.length)this.statsArray.forEach(function(t){null!=t.avg?($('aside[data-id="'+t.id+'"] > div.basic-data-panel__value > span.basic-data-panel__value-container').html(t.avg),$('aside[data-id="'+t.id+'"] > div.basic-data-panel__label--black > span.max').html(t.max),$('aside[data-id="'+t.id+'"] > div.basic-data-panel__label--black > span.min').html(t.min)):null!=t.total?($('aside[data-id="'+t.id+'"]').show(),$('aside[data-id="'+t.id+'"] > div.basic-data-panel__value > span.basic-data-panel__value-container').html(t.total)):$('aside[data-id="'+t.id+'"]').hide()});else{var t=_.template($("#templateRangeStatistics").html());$(".range-statistics > form > .row").html(t({statsArray:this.statsArray}))}this.parent.customLapText?$(".range-statistics__selection-name").html(this.parent.customLapText):$(".range-statistics__selection-name").html(""),!this.parent.customLapText||this.parent.markersType!==SuperGraph.MARKER.lap&&this.parent.markersType!==SuperGraph.MARKER.phase?$(".range-statistics-arrows").hide():$(".range-statistics-arrows").show()}};
//# sourceMappingURL=rangeStatistics.min.js.map