!function(e){e.fn||(e.fn=new Object),e.fn.commonPieChart=function(t,o){var a=this;return a.$el=e(t),a.el=t,a.$el.data("fn.commonPieChart",a),a.init=function(){a.options=e.extend({},e.fn.commonPieChart.defaultOptions,o),a.data=a.el.data,a.piechartType=a.el.piechartType,a.options.pieContainer=this.attr("id"),a.options.pieLabelsContainer=a.el.labels,a.colors=a.el.colors,a.loadEventHandler=a.el.loadEventHandler,a.loadEventHandlerMethod=a.el.loadEventHandlerMethod,a.animationEnabled=a.el.animationEnabled,a.chartOptions={chart:{renderTo:a.options.pieContainer,plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1,backgroundColor:null,margin:[8,8,8,8],spacingTop:0,spacingBottom:0,spacingLeft:0,spacingRight:0,events:{load:function(){if(null!=a.loadEventHandler&&null!=a.loadEventHandlerMethod){var e=a.loadEventHandler,t=a.loadEventHandlerMethod;null!=e[t]&&e[t].call(e)}}}},colors:a.colors,title:{text:null},tooltip:{percentageDecimals:1,borderColor:"none",borderRadius:0,backgroundColor:"none",textColor:CommonHelpers.textColorInverted,shadow:!1,border:0,useHTML:!0,style:{padding:"10px"},title:null,formatter:function(){return a.selectPieChartSlice(this.point.x),a.hoverLegendValue(this.point.x),"other"===this.key?'<div class="custom-tooltip">'+a.otherHtml+"</div>":'<div class="custom-tooltip">'+this.key+"</div>"}},plotOptions:{pie:{size:"100%",allowPointSelect:!0,cursor:"pointer",innerSize:"45%",borderWidth:2,borderColor:CommonHelpers.backgroundColor,shadow:!1,dataLabels:{enabled:!1},showInLegend:!0},animation:{duration:50}},legend:{enabled:!1},series:a.createSeries()},a.animationEnabled===!1&&(a.chartOptions.plotOptions.series={animation:!1}),a.chart=new Highcharts.Chart(a.chartOptions),a.otherHtml=Messages["common.other"],a.createLabelsForChart()},a.createSeries=function(){for(var e=[],t=0,o=0;o<a.data.length;o++){var n=a.data[o].nameForChart;if("BENEFIT"===a.piechartType&&"NONE"!==n?n=Messages[n+".short"]:"BENEFIT"===a.piechartType&&"NONE"===n?n=Messages["NONE.BENEFIT"]:"SPORT"===a.piechartType&&"NONE"===n&&(n=Messages["sport.NONE"]),o<=3){var i=Math.round(10*Number(CommonHelpers.format2Digits(a.data[o].percentForChart)))/10;e.push([i+" % "+n,i])}else t+=Math.round(10*Number(CommonHelpers.format2Digits(a.data[o].percentForChart)))/10}return t>0&&e.push(["other",t]),[{type:"pie",name:"",data:e,states:{hover:{enabled:!1}}}]},a.createLabelsForChart=function(){for(var t="",o="",n=0,i=0;i<a.data.length;i++){var r=a.data[i].nameForChart;"BENEFIT"===a.piechartType&&"NONE"!==r?r=Messages[r+".short"]:"BENEFIT"===a.piechartType&&"NONE"===r?r=Messages["NONE.BENEFIT"]:"SPORT"===a.piechartType&&"NONE"===r&&(r=Messages["sport.NONE"]),i<=3?(t+="<div class='chart-distribution-value' ref="+i+">",t+="<div class='numeric-value' style='color:"+a.colors[i]+";'>"+CommonHelpers.round(a.data[i].percentForChart,0)+" %</div>",t+="<div class='text-value' style='color:"+a.colors[i]+";'>"+r+"</div>",t+="</div>"):(n+=a.data[i].percentForChart,o+="<div class='report-other-tooltip-row'>"+CommonHelpers.round(a.data[i].percentForChart,0)+"% "+r+" </div>")}n>0&&(t+="<div class='chart-distribution-value other-tooltip' ref='4'>",t+="<div class='numeric-value' style='color:"+a.colors[5]+";'>"+CommonHelpers.round(n,0)+" %</div>",t+="<div class='text-value' style='color:"+a.colors[5]+";'>"+Messages["common.other"]+"</div>",t+="</div>"),e("#"+a.options.pieLabelsContainer).html(t),e("#"+a.options.pieLabelsContainer+" .chart-distribution-value").unbind("click mouseover"),e("#"+a.options.pieLabelsContainer+" .chart-distribution-value").bind("click mouseover",function(){var t=e(this).attr("ref");a.selectPieChartSlice(t)}),a.otherHtml=o},a.addToolTip=function(){e("#"+a.options.pieLabelsContainer).append('<div id="'+a.options.pieLabelsContainer+'-otherTooltip" class="report-other-tooltip-container"></div>'),e("#"+a.options.pieLabelsContainer+"-otherTooltip").html(a.otherHtml+"<div class='bottom-arrow'></div>"),e("#"+a.options.pieLabelsContainer+" .other-tooltip").hover(function(t){var o=t.pageY-e("#"+a.options.pieLabelsContainer+"-otherTooltip").height()-60,n=t.pageX-e("#"+a.options.pieLabelsContainer+"-otherTooltip").width()/2;e("#"+a.options.pieLabelsContainer+"-otherTooltip").css({left:n,top:o}),e("#"+a.options.pieLabelsContainer+"-otherTooltip").show()},function(){e("#"+a.options.pieLabelsContainer+"-otherTooltip").hide()})},a.hoverLegendValue=function(t){e("#"+a.options.pieLabelsContainer+" .chart-distribution-value").each(function(o){e(this).find(".numeric-value").removeClass("active-numeric-value"),t==o&&e(this).find(".numeric-value").addClass("active-numeric-value")})},a.selectPieChartSlice=function(e){a.chart.series[0].data[e].selected!==!0&&a.chart.series[0].data[e].select()},a.init(),a},e.fn.commonPieChart.defaultOptions={pieContainer:"",pieLabelsContainer:""},e.fn.fn_commonPieChart=function(t){return this.each(function(){new e.fn.commonPieChart(this,t)})}}(jQuery);
//# sourceMappingURL=jquery.commonPieChart.min.js.map